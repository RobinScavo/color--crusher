{"ast":null,"code":"import _slicedToArray from \"/Users/robinscavo/Desktop/projects/KolorKrush/Kolor_Krusher-Express/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/robinscavo/Desktop/projects/KolorKrush/Kolor_Krusher-Express/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useStorageState } from 'react-storage-hooks';\nimport firebase from \"./firebase\";\nimport UserContext from './context/UserContext';\nimport Controller from './Controller';\nimport Message from './Components/Message/Message';\n\nfunction App() {\n  _s();\n\n  var _useStorageState = useStorageState(localStorage, 'state-user', {}),\n      _useStorageState2 = _slicedToArray(_useStorageState, 2),\n      user = _useStorageState2[0],\n      setUser = _useStorageState2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      players = _useState2[0],\n      setPlayers = _useState2[1];\n\n  var _useState3 = useState({\n    key: null,\n    name: '',\n    email: '',\n    score: 0\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentPlayer = _useState4[0],\n      setCurrentPlayer = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      message = _useState6[0],\n      setMessage = _useState6[1];\n\n  useEffect(function () {\n    var playersRef = firebase.database().ref('players');\n    playersRef.on('value', function (snapshot) {\n      var players = snapshot.val();\n      var newStatePlayers = [];\n\n      for (var player in players) {\n        newStatePlayers.push({\n          key: player,\n          name: players[player].name,\n          email: players[player].email,\n          password: players[player].password,\n          score: players[player].score\n        });\n      }\n\n      newStatePlayers.sort(function (a, b) {\n        return b.score - a.score;\n      });\n      setPlayers(newStatePlayers);\n    });\n  }, []);\n  useEffect(function () {\n    var targetPlayer = {\n      key: null,\n      name: '',\n      email: '',\n      score: 0\n    };\n\n    if (user.email) {\n      targetPlayer = players.find(function (player) {\n        return player.email === user.email;\n      });\n    } else {\n      return;\n    }\n\n    firebase.auth().onAuthStateChanged(function () {\n      if (targetPlayer) {\n        setCurrentPlayer({\n          key: targetPlayer.key,\n          name: targetPlayer.name,\n          email: targetPlayer.email,\n          score: targetPlayer.score\n        });\n      }\n    });\n  }, [user, players]);\n\n  var onLogin = function onLogin(email, password) {\n    firebase.auth().signInWithEmailAndPassword(email, password).then(function (response) {\n      setUser({\n        email: response.user['email'],\n        isAuthenticated: true\n      });\n    }).catch(function () {\n      return setFlashMessage('invalidCredentialed');\n    });\n  };\n\n  var onDemoLogin = function onDemoLogin() {\n    return onLogin('player@gmail.com', '121212');\n  };\n\n  var onLogout = function onLogout() {\n    var nullPlayer = {\n      key: null,\n      name: '',\n      email: '',\n      score: 0\n    };\n    firebase.auth().signOut().then(function () {\n      setCurrentPlayer(nullPlayer);\n      setUser({\n        email: '',\n        isAuthenticated: false\n      });\n    }).catch(function () {\n      return setFlashMessage('logoutFailed');\n    });\n  };\n\n  var onSignup = function onSignup(email, password, name, score) {\n    firebase.auth().createUserWithEmailAndPassword(email, password).then(function (credential) {\n      setUser({\n        email: credential.user.email,\n        isAuthenticated: true\n      });\n      addNewPlayer(email, password, name, score);\n    }).catch(function () {\n      return setFlashMessage('signupFailed');\n    });\n  };\n\n  var onEdit = function onEdit(key, email, name, score) {\n    //disallow modification of Player and Guest\n    if (user.email === 'guest@gmail.com' || user.email === 'player@gmail.com') {\n      setFlashMessage('cannotEdit');\n      return;\n    }\n\n    var newInfo = {\n      name: name,\n      email: email,\n      score: score\n    };\n    var playerRef = firebase.database().ref('players/' + key);\n    playerRef.update(newInfo);\n    setFlashMessage('updated');\n  };\n\n  var updateScore = function updateScore(newScore) {\n    var playerRef = firebase.database().ref('players/' + currentPlayer.key);\n\n    if (newScore > currentPlayer.score) {\n      playerRef.update({\n        name: currentPlayer.name,\n        email: currentPlayer.email,\n        score: newScore\n      });\n    }\n  };\n\n  var setFlashMessage = function setFlashMessage(message) {\n    setMessage(message);\n    setTimeout(function () {\n      setMessage(null);\n    }, 1600);\n  };\n\n  var addNewPlayer = function addNewPlayer(email, password, name, score) {\n    var playersRef = firebase.database().ref('players');\n    playersRef.push({\n      name: name,\n      email: email,\n      password: password,\n      score: score\n    });\n    setFlashMessage('saved');\n  };\n\n  var deletePlayer = function deletePlayer(player) {\n    //disallow modification of Player and Guest\n    if (user.email === 'guest@gmail.com' || user.email === 'player@gmail.com') {\n      setFlashMessage('cannotEdit');\n      return;\n    }\n\n    if (window.confirm('Your account will be deleted. Proceed?')) {\n      var playerRef = firebase.database().ref('players/' + player);\n      playerRef.remove();\n      setFlashMessage('deleted');\n    }\n\n    onLogout();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n      value: {\n        user: user,\n        players: players,\n        currentPlayer: currentPlayer,\n        onLogin: onLogin,\n        onLogout: onLogout,\n        onSignup: onSignup,\n        onEdit: onEdit,\n        onDemoLogin: onDemoLogin,\n        addNewPlayer: addNewPlayer,\n        deletePlayer: deletePlayer,\n        updateScore: updateScore,\n        setFlashMessage: setFlashMessage\n      },\n      children: [message && /*#__PURE__*/_jsxDEV(Message, {\n        type: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(Controller, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"JNiLOutTCpjZ2bMB3E3tR5LcRVA=\", false, function () {\n  return [useStorageState];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/robinscavo/Desktop/projects/KolorKrush/Kolor_Krusher-Express/src/App.js"],"names":["React","useState","useEffect","useStorageState","firebase","UserContext","Controller","Message","App","localStorage","user","setUser","players","setPlayers","key","name","email","score","currentPlayer","setCurrentPlayer","message","setMessage","playersRef","database","ref","on","snapshot","val","newStatePlayers","player","push","password","sort","a","b","targetPlayer","find","auth","onAuthStateChanged","onLogin","signInWithEmailAndPassword","then","response","isAuthenticated","catch","setFlashMessage","onDemoLogin","onLogout","nullPlayer","signOut","onSignup","createUserWithEmailAndPassword","credential","addNewPlayer","onEdit","newInfo","playerRef","update","updateScore","newScore","setTimeout","deletePlayer","window","confirm","remove"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useStorageState } from 'react-storage-hooks';\nimport firebase from \"./firebase\";\n\nimport UserContext from './context/UserContext'\nimport Controller from './Controller'\nimport Message from './Components/Message/Message'\n\nfunction App() {\n  const [user, setUser] = useStorageState(localStorage, 'state-user', {});\n  const [players, setPlayers] = useState([])\n  const [currentPlayer, setCurrentPlayer] = useState({ key: null, name: '', email: '', score: 0})\n  const [message, setMessage] = useState('')\n\n  useEffect(() => {\n    const playersRef =\n      firebase\n        .database()\n        .ref('players')\n\n    playersRef.on('value', (snapshot) => {\n      const players = snapshot.val();\n      const newStatePlayers = [];\n\n      for (let player in players) {\n        newStatePlayers.push({\n          key: player,\n          name: players[player].name,\n          email: players[player].email,\n          password: players[player].password,\n          score: players[player].score,\n        })\n      }\n\n      newStatePlayers.sort(function(a, b) {\n        return b.score - a.score\n      })\n      setPlayers(newStatePlayers)\n    });\n  }, []);\n\n  useEffect(() => {\n    let targetPlayer = { key: null, name: '', email: '', score: 0}\n    if (user.email) {\n      targetPlayer = players.find((player) => (player.email === user.email))\n    } else {\n      return\n    }\n\n    firebase\n      .auth()\n      .onAuthStateChanged(() => {\n        if (targetPlayer) {\n          setCurrentPlayer({\n            key: targetPlayer.key,\n            name: targetPlayer.name,\n            email: targetPlayer.email,\n            score: targetPlayer.score\n          })\n        }\n      })\n  }, [user, players]);\n\n  const onLogin = (email, password) => {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password)\n      .then((response) => {\n        setUser({\n          email: response.user['email'],\n          isAuthenticated: true,\n        })\n      })\n      .catch(() => setFlashMessage('invalidCredentialed'))\n  }\n\n  const onDemoLogin = () => onLogin('player@gmail.com', '121212')\n\n  const onLogout = () => {\n    const nullPlayer = {\n      key: null,\n      name: '',\n      email: '',\n      score: 0\n    }\n\n    firebase\n      .auth()\n      .signOut()\n      .then(() => {\n        setCurrentPlayer(nullPlayer)\n\n        setUser({\n          email: '',\n          isAuthenticated: false\n        });\n      })\n      .catch(() => setFlashMessage('logoutFailed'))\n  }\n\n  const onSignup = (email, password, name, score) => {\n    firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password)\n      .then((credential) => {\n        setUser({\n          email: credential.user.email,\n          isAuthenticated: true,\n        })\n\n        addNewPlayer(email, password, name, score)\n      })\n      .catch(() => setFlashMessage('signupFailed'))\n  }\n\n  const onEdit = (key, email, name, score) => {\n    //disallow modification of Player and Guest\n    if (user.email === 'guest@gmail.com' || user.email === 'player@gmail.com') {\n      setFlashMessage('cannotEdit')\n      return\n    }\n\n    const newInfo =({\n      name: name,\n      email: email,\n      score: score,\n    })\n\n    const playerRef = firebase.database().ref('players/' + key);\n    playerRef.update(newInfo)\n    setFlashMessage('updated')\n  }\n\n  const updateScore = (newScore) => {\n    const playerRef = firebase.database().ref('players/' + currentPlayer.key);\n    if(newScore > currentPlayer.score) {\n      playerRef.update({\n        name: currentPlayer.name,\n        email: currentPlayer.email,\n        score: newScore\n      })\n    }\n  }\n\n  const setFlashMessage = (message) => {\n    setMessage(message)\n    setTimeout(() => {\n      setMessage(null)\n    }, 1600)\n  }\n\n  const addNewPlayer = (email, password, name, score) => {\n    const playersRef = firebase.database().ref('players')\n\n    playersRef.push({\n      name: name,\n      email: email,\n      password: password,\n      score: score\n    });\n    setFlashMessage('saved')\n  }\n\n  const deletePlayer = (player) => {\n    //disallow modification of Player and Guest\n    if (user.email === 'guest@gmail.com' || user.email === 'player@gmail.com') {\n      setFlashMessage('cannotEdit')\n      return\n    }\n\n    if (window.confirm('Your account will be deleted. Proceed?')) {\n      const playerRef = firebase.database().ref('players/' + player);\n      playerRef.remove();\n      setFlashMessage('deleted')\n    }\n    onLogout();\n  }\n\n  return (\n    <>\n      <UserContext.Provider value={{\n        user,\n        players,\n        currentPlayer,\n        onLogin,\n        onLogout,\n        onSignup,\n        onEdit,\n        onDemoLogin,\n        addNewPlayer,\n        deletePlayer,\n        updateScore,\n        setFlashMessage\n      }}>\n          {message && <Message type={message} />}\n          <Controller />\n      </UserContext.Provider>\n    </>\n)\n}\n\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}